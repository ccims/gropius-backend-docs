"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[66158],{73623:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=n(487462),l=(n(667294),n(603905));const r={id:"model_postgres_AuthClient_entity.AuthClient",title:"Class: AuthClient",sidebar_label:"AuthClient",custom_edit_url:null},s=void 0,a={unversionedId:"login-service-api/classes/model_postgres_AuthClient_entity.AuthClient",id:"login-service-api/classes/model_postgres_AuthClient_entity.AuthClient",title:"Class: AuthClient",description:"model/postgres/AuthClient.entity.AuthClient",source:"@site/docs/login-service-api/classes/model_postgres_AuthClient_entity.AuthClient.md",sourceDirName:"login-service-api/classes",slug:"/login-service-api/classes/model_postgres_AuthClient_entity.AuthClient",permalink:"/gropius-backend-docs/login-service-api/classes/model_postgres_AuthClient_entity.AuthClient",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"model_postgres_AuthClient_entity.AuthClient",title:"Class: AuthClient",sidebar_label:"AuthClient",custom_edit_url:null},sidebar:"apiSidebar",previous:{title:"ActiveLogin",permalink:"/gropius-backend-docs/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin"},next:{title:"LoginUser",permalink:"/gropius-backend-docs/login-service-api/classes/model_postgres_LoginUser_entity.LoginUser"}},o={},d=[{value:"Constructors",id:"constructors",level:2},{value:"constructor",id:"constructor",level:3},{value:"Properties",id:"properties",level:2},{value:"clientSecrets",id:"clientsecrets",level:3},{value:"Defined in",id:"defined-in",level:4},{value:"id",id:"id",level:3},{value:"Defined in",id:"defined-in-1",level:4},{value:"isValid",id:"isvalid",level:3},{value:"Defined in",id:"defined-in-2",level:4},{value:"loginsOfThisClient",id:"loginsofthisclient",level:3},{value:"Defined in",id:"defined-in-3",level:4},{value:"name",id:"name",level:3},{value:"Defined in",id:"defined-in-4",level:4},{value:"redirectUrls",id:"redirecturls",level:3},{value:"Defined in",id:"defined-in-5",level:4},{value:"requiresSecret",id:"requiressecret",level:3},{value:"Defined in",id:"defined-in-6",level:4},{value:"Methods",id:"methods",level:2},{value:"addSecret",id:"addsecret",level:3},{value:"Returns",id:"returns",level:4},{value:"Defined in",id:"defined-in-7",level:4},{value:"fingerprint",id:"fingerprint",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Defined in",id:"defined-in-8",level:4},{value:"getFullHashesPlusCensoredAndFingerprint",id:"getfullhashespluscensoredandfingerprint",level:3},{value:"Returns",id:"returns-2",level:4},{value:"Defined in",id:"defined-in-9",level:4},{value:"getSecretsShortedAndFingerprint",id:"getsecretsshortedandfingerprint",level:3},{value:"Returns",id:"returns-3",level:4},{value:"Defined in",id:"defined-in-10",level:4},{value:"toJSON",id:"tojson",level:3},{value:"Returns",id:"returns-4",level:4},{value:"Defined in",id:"defined-in-11",level:4}],p={toc:d},u="wrapper";function c(e){let{components:t,...n}=e;return(0,l.kt)(u,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/modules/model_postgres_AuthClient_entity"},"model/postgres/AuthClient.entity"),".AuthClient"),(0,l.kt)("p",null,"Entity representing a client application that requires access to Gropius and that can ask for authentication."),(0,l.kt)("p",null,"A client is identified by its client id and CAN optionally be secured by secrets to restrict usage"),(0,l.kt)("h2",{id:"constructors"},"Constructors"),(0,l.kt)("h3",{id:"constructor"},"constructor"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"new AuthClient"),"()"),(0,l.kt)("h2",{id:"properties"},"Properties"),(0,l.kt)("h3",{id:"clientsecrets"},"clientSecrets"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"clientSecrets"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"[]"),(0,l.kt)("p",null,"The list of hashed client secrets.\nEvery entry is structured like ",(0,l.kt)("inlineCode",{parentName:"p"},"[CENSORED];[BCRYPT_HASH]")," with:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"[CENSORED]"," is a n letter prefix of the actual secret to display to the user for easier association"),(0,l.kt)("li",{parentName:"ul"},"[BCRYPT_HASH]"," is the salted hash of the full secret for use to compare with a later given secret")),(0,l.kt)("h4",{id:"defined-in"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L63"},"login-service/src/model/postgres/AuthClient.entity.ts:63")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"id"},"id"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"id"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")),(0,l.kt)("p",null,"The unique ID of this client"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"12345678-90ab-cdef-fedc-ab0987654321\n")),(0,l.kt)("h4",{id:"defined-in-1"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L34"},"login-service/src/model/postgres/AuthClient.entity.ts:34")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"isvalid"},"isValid"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"isValid"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"boolean")),(0,l.kt)("p",null,"If this is ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," the client is not valid and no authorization, token, ... requests from it should be answered."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"true\n")),(0,l.kt)("h4",{id:"defined-in-2"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L71"},"login-service/src/model/postgres/AuthClient.entity.ts:71")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"loginsofthisclient"},"loginsOfThisClient"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"loginsOfThisClient"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,l.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_postgres_ActiveLogin_entity.ActiveLogin"},(0,l.kt)("inlineCode",{parentName:"a"},"ActiveLogin")),"[]",">"),(0,l.kt)("p",null,"A list of all login events that this client caused."),(0,l.kt)("h4",{id:"defined-in-3"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L88"},"login-service/src/model/postgres/AuthClient.entity.ts:88")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"name"},"name"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"name"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")),(0,l.kt)("p",null,"The (human readable) name of the auth client to be able to keep track ofit."),(0,l.kt)("p",null,"Doesn't need to be unique, can be null"),(0,l.kt)("h4",{id:"defined-in-4"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L42"},"login-service/src/model/postgres/AuthClient.entity.ts:42")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"redirecturls"},"redirectUrls"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"redirectUrls"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"[]"),(0,l.kt)("p",null,"The list of valid enpoints to redirect the user back to after authentication has finished."),(0,l.kt)("p",null,"The actual url to use is given in the authorize request and must be included in this list.\nIf none is given, the first one from this list will be used"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'["https://example.com/oauth/callback?query=value"]\n')),(0,l.kt)("h4",{id:"defined-in-5"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L53"},"login-service/src/model/postgres/AuthClient.entity.ts:53")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"requiressecret"},"requiresSecret"),(0,l.kt)("p",null,"\u2022 ",(0,l.kt)("strong",{parentName:"p"},"requiresSecret"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"boolean")),(0,l.kt)("p",null,"If ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," requesting a token as this client requires the use\nof a client secret accoring to the oauth specification."),(0,l.kt)("p",null,"If ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," client secrets can be present and given but are not required"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"Example"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"false\n")),(0,l.kt)("h4",{id:"defined-in-6"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L81"},"login-service/src/model/postgres/AuthClient.entity.ts:81")),(0,l.kt)("h2",{id:"methods"},"Methods"),(0,l.kt)("h3",{id:"addsecret"},"addSecret"),(0,l.kt)("p",null,"\u25b8 ",(0,l.kt)("strong",{parentName:"p"},"addSecret"),"(): ",(0,l.kt)("inlineCode",{parentName:"p"},"Promise"),"<{ ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"secretText"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }",">"),(0,l.kt)("p",null,"Generates a new secret and adds it to the list of this client.\nDoes NOT save the entitiy!"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note"),": The secret text is only returned here and will not be saved as plain text.\nThere is no way to retrieve it later.\nOnly a hashed version and a n letter prefix (for easier identification) will be saved"),(0,l.kt)("p",null,"The generated secret will be hex encoded random bytes of length GROPIUS_CLIENT_SECRET_LENGTH"),(0,l.kt)("h4",{id:"returns"},"Returns"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Promise"),"<{ ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"secretText"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }",">"),(0,l.kt)("p",null,"The generated secret text, the fingerprint of the hash of the secret and the censored version"),(0,l.kt)("h4",{id:"defined-in-7"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L112"},"login-service/src/model/postgres/AuthClient.entity.ts:112")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"fingerprint"},"fingerprint"),(0,l.kt)("p",null,"\u25b8 ",(0,l.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,l.kt)("strong",{parentName:"p"},"fingerprint"),"(",(0,l.kt)("inlineCode",{parentName:"p"},"hash"),"): ",(0,l.kt)("inlineCode",{parentName:"p"},"string")),(0,l.kt)("p",null,"Calculated the sha256 hash of the input."),(0,l.kt)("p",null,"Can be used as fingerprint for the secret hashes."),(0,l.kt)("h4",{id:"parameters"},"Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"hash")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:"left"},"The hash or other data to calculate the fingerprint for")))),(0,l.kt)("h4",{id:"returns-1"},"Returns"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"string")),(0,l.kt)("p",null,"The hex string of the sha256 hash"),(0,l.kt)("h4",{id:"defined-in-8"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L97"},"login-service/src/model/postgres/AuthClient.entity.ts:97")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"getfullhashespluscensoredandfingerprint"},"getFullHashesPlusCensoredAndFingerprint"),(0,l.kt)("p",null,"\u25b8 ",(0,l.kt)("strong",{parentName:"p"},"getFullHashesPlusCensoredAndFingerprint"),"(): { ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"secret"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }[]"),(0,l.kt)("p",null,"Returns a list containing not only the string stored in the database,\nbut also the n letter censored prefix and the fingerprint of the hash."),(0,l.kt)("p",null,"The result of this should NOT be exposed as it contains the full hash."),(0,l.kt)("h4",{id:"returns-2"},"Returns"),(0,l.kt)("p",null,"{ ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"secret"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }[]"),(0,l.kt)("p",null,"A list of the full stored hash, censore version and the fingerprint of the hash for every secret"),(0,l.kt)("h4",{id:"defined-in-9"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L140"},"login-service/src/model/postgres/AuthClient.entity.ts:140")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"getsecretsshortedandfingerprint"},"getSecretsShortedAndFingerprint"),(0,l.kt)("p",null,"\u25b8 ",(0,l.kt)("strong",{parentName:"p"},"getSecretsShortedAndFingerprint"),"(): { ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }[]"),(0,l.kt)("p",null,"Removes the full hash from the result of ",(0,l.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_postgres_AuthClient_entity.AuthClient#getfullhashespluscensoredandfingerprint"},"AuthClient.getFullHashesPlusCensoredAndFingerprint")),(0,l.kt)("p",null,"May be published on the API"),(0,l.kt)("h4",{id:"returns-3"},"Returns"),(0,l.kt)("p",null,"{ ",(0,l.kt)("inlineCode",{parentName:"p"},"censored"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," ; ",(0,l.kt)("inlineCode",{parentName:"p"},"fingerprint"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),"  }[]"),(0,l.kt)("p",null,"A list of censored secret and hash-fingerprint for every secret of this client"),(0,l.kt)("h4",{id:"defined-in-10"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L164"},"login-service/src/model/postgres/AuthClient.entity.ts:164")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"tojson"},"toJSON"),(0,l.kt)("p",null,"\u25b8 ",(0,l.kt)("strong",{parentName:"p"},"toJSON"),"(): ",(0,l.kt)("inlineCode",{parentName:"p"},"Object")),(0,l.kt)("h4",{id:"returns-4"},"Returns"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Object")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"id")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"string"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"isValid")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"boolean"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"redirectUrls")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"string"),"[]")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"requiresSecret")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,l.kt)("h4",{id:"defined-in-11"},"Defined in"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/model/postgres/AuthClient.entity.ts#L174"},"login-service/src/model/postgres/AuthClient.entity.ts:174")))}c.isMDXComponent=!0}}]);