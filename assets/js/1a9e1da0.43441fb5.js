"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[67601],{516464:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var n=i(487462),a=(i(667294),i(603905));const r={id:"initialization_check_database_consistency_service.CheckDatabaseConsistencyService",title:"Class: CheckDatabaseConsistencyService",sidebar_label:"CheckDatabaseConsistencyService",custom_edit_url:null},s=void 0,l={unversionedId:"login-service-api/classes/initialization_check_database_consistency_service.CheckDatabaseConsistencyService",id:"login-service-api/classes/initialization_check_database_consistency_service.CheckDatabaseConsistencyService",title:"Class: CheckDatabaseConsistencyService",description:"initialization/check-database-consistency.service.CheckDatabaseConsistencyService",source:"@site/docs/login-service-api/classes/initialization_check_database_consistency_service.CheckDatabaseConsistencyService.md",sourceDirName:"login-service-api/classes",slug:"/login-service-api/classes/initialization_check_database_consistency_service.CheckDatabaseConsistencyService",permalink:"/gropius-backend-docs/login-service-api/classes/initialization_check_database_consistency_service.CheckDatabaseConsistencyService",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"initialization_check_database_consistency_service.CheckDatabaseConsistencyService",title:"Class: CheckDatabaseConsistencyService",sidebar_label:"CheckDatabaseConsistencyService",custom_edit_url:null},sidebar:"apiSidebar",previous:{title:"DefaultReturn",permalink:"/gropius-backend-docs/login-service-api/classes/default_return_dto.DefaultReturn"},next:{title:"CreateDefaultAuthClientService",permalink:"/gropius-backend-docs/login-service-api/classes/initialization_create_default_auth_client_service.CreateDefaultAuthClientService"}},c={},o=[{value:"Constructors",id:"constructors",level:2},{value:"constructor",id:"constructor",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Defined in",id:"defined-in",level:4},{value:"Properties",id:"properties",level:2},{value:"activeLoginService",id:"activeloginservice",level:3},{value:"Defined in",id:"defined-in-1",level:4},{value:"authClientService",id:"authclientservice",level:3},{value:"Defined in",id:"defined-in-2",level:4},{value:"backendUserService",id:"backenduserservice",level:3},{value:"Defined in",id:"defined-in-3",level:4},{value:"imsUserFindingService",id:"imsuserfindingservice",level:3},{value:"Defined in",id:"defined-in-4",level:4},{value:"logger",id:"logger",level:3},{value:"Defined in",id:"defined-in-5",level:4},{value:"loginUserService",id:"loginuserservice",level:3},{value:"Defined in",id:"defined-in-6",level:4},{value:"strategyInstanceService",id:"strategyinstanceservice",level:3},{value:"Defined in",id:"defined-in-7",level:4},{value:"strategyService",id:"strategyservice",level:3},{value:"Defined in",id:"defined-in-8",level:4},{value:"userLoginDataImsUserService",id:"userlogindataimsuserservice",level:3},{value:"Defined in",id:"defined-in-9",level:4},{value:"userLoginDataService",id:"userlogindataservice",level:3},{value:"Defined in",id:"defined-in-10",level:4},{value:"Methods",id:"methods",level:2},{value:"checkActiveLogin",id:"checkactivelogin",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns",level:4},{value:"Defined in",id:"defined-in-11",level:4},{value:"checkDatabaseConsistency",id:"checkdatabaseconsistency",level:3},{value:"Returns",id:"returns-1",level:4},{value:"Defined in",id:"defined-in-12",level:4},{value:"checkLoginUser",id:"checkloginuser",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Defined in",id:"defined-in-13",level:4},{value:"checkStrategyInstance",id:"checkstrategyinstance",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Returns",id:"returns-3",level:4},{value:"Defined in",id:"defined-in-14",level:4},{value:"checkUserLoginData",id:"checkuserlogindata",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Returns",id:"returns-4",level:4},{value:"Defined in",id:"defined-in-15",level:4},{value:"checkUserLoginDataImsUser",id:"checkuserlogindataimsuser",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Returns",id:"returns-5",level:4},{value:"Defined in",id:"defined-in-16",level:4},{value:"ensureDatabaseConsistency",id:"ensuredatabaseconsistency",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"Returns",id:"returns-6",level:4},{value:"Defined in",id:"defined-in-17",level:4},{value:"runDatabaseCheck",id:"rundatabasecheck",level:3},{value:"Returns",id:"returns-7",level:4},{value:"Defined in",id:"defined-in-18",level:4},{value:"testDatabaseForConsistency",id:"testdatabaseforconsistency",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"Returns",id:"returns-8",level:4},{value:"Defined in",id:"defined-in-19",level:4}],d={toc:o},k="wrapper";function p(e){let{components:t,...i}=e;return(0,a.kt)(k,(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/modules/initialization_check_database_consistency_service"},"initialization/check-database-consistency.service"),".CheckDatabaseConsistencyService"),(0,a.kt)("h2",{id:"constructors"},"Constructors"),(0,a.kt)("h3",{id:"constructor"},"constructor"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("strong",{parentName:"p"},"new CheckDatabaseConsistencyService"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"activeLoginService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"authClientService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"loginUserService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"strategyInstanceService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"strategyService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"userLoginDataService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"userLoginDataImsUserService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"backendUserService"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"imsUserFindingService"),")"),(0,a.kt)("h4",{id:"parameters"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"activeLoginService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_active_login_service.ActiveLoginService"},(0,a.kt)("inlineCode",{parentName:"a"},"ActiveLoginService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"authClientService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_auth_client_service.AuthClientService"},(0,a.kt)("inlineCode",{parentName:"a"},"AuthClientService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"loginUserService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_login_user_service.LoginUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"LoginUserService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"strategyInstanceService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_strategy_instance_service.StrategyInstanceService"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategyInstanceService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"strategyService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_strategies_service.StrategiesService"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategiesService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"userLoginDataService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_user_login_data_service.UserLoginDataService"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginDataService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"userLoginDataImsUserService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/model_services_user_login_data_ims_user.UserLoginDataImsUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginDataImsUserService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"backendUserService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/backend_services_backend_user_service.BackendUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"BackendUserService")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"imsUserFindingService")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("a",{parentName:"td",href:"/gropius-backend-docs/login-service-api/classes/backend_services_ims_user_finding_service.ImsUserFindingService"},(0,a.kt)("inlineCode",{parentName:"a"},"ImsUserFindingService")))))),(0,a.kt)("h4",{id:"defined-in"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L17"},"login-service/src/initialization/check-database-consistency.service.ts:17")),(0,a.kt)("h2",{id:"properties"},"Properties"),(0,a.kt)("h3",{id:"activeloginservice"},"activeLoginService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"activeLoginService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_active_login_service.ActiveLoginService"},(0,a.kt)("inlineCode",{parentName:"a"},"ActiveLoginService"))),(0,a.kt)("h4",{id:"defined-in-1"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L18"},"login-service/src/initialization/check-database-consistency.service.ts:18")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"authclientservice"},"authClientService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"authClientService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_auth_client_service.AuthClientService"},(0,a.kt)("inlineCode",{parentName:"a"},"AuthClientService"))),(0,a.kt)("h4",{id:"defined-in-2"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L19"},"login-service/src/initialization/check-database-consistency.service.ts:19")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"backenduserservice"},"backendUserService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"backendUserService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/backend_services_backend_user_service.BackendUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"BackendUserService"))),(0,a.kt)("h4",{id:"defined-in-3"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L25"},"login-service/src/initialization/check-database-consistency.service.ts:25")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"imsuserfindingservice"},"imsUserFindingService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"imsUserFindingService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/backend_services_ims_user_finding_service.ImsUserFindingService"},(0,a.kt)("inlineCode",{parentName:"a"},"ImsUserFindingService"))),(0,a.kt)("h4",{id:"defined-in-4"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L26"},"login-service/src/initialization/check-database-consistency.service.ts:26")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"logger"},"logger"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"logger"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"Logger")),(0,a.kt)("h4",{id:"defined-in-5"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L16"},"login-service/src/initialization/check-database-consistency.service.ts:16")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"loginuserservice"},"loginUserService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"loginUserService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_login_user_service.LoginUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"LoginUserService"))),(0,a.kt)("h4",{id:"defined-in-6"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L20"},"login-service/src/initialization/check-database-consistency.service.ts:20")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"strategyinstanceservice"},"strategyInstanceService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"strategyInstanceService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_strategy_instance_service.StrategyInstanceService"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategyInstanceService"))),(0,a.kt)("h4",{id:"defined-in-7"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L21"},"login-service/src/initialization/check-database-consistency.service.ts:21")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"strategyservice"},"strategyService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"strategyService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_strategies_service.StrategiesService"},(0,a.kt)("inlineCode",{parentName:"a"},"StrategiesService"))),(0,a.kt)("h4",{id:"defined-in-8"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L22"},"login-service/src/initialization/check-database-consistency.service.ts:22")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"userlogindataimsuserservice"},"userLoginDataImsUserService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"userLoginDataImsUserService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_user_login_data_ims_user.UserLoginDataImsUserService"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginDataImsUserService"))),(0,a.kt)("h4",{id:"defined-in-9"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L24"},"login-service/src/initialization/check-database-consistency.service.ts:24")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"userlogindataservice"},"userLoginDataService"),(0,a.kt)("p",null,"\u2022 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Readonly")," ",(0,a.kt)("strong",{parentName:"p"},"userLoginDataService"),": ",(0,a.kt)("a",{parentName:"p",href:"/gropius-backend-docs/login-service-api/classes/model_services_user_login_data_service.UserLoginDataService"},(0,a.kt)("inlineCode",{parentName:"a"},"UserLoginDataService"))),(0,a.kt)("h4",{id:"defined-in-10"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L23"},"login-service/src/initialization/check-database-consistency.service.ts:23")),(0,a.kt)("h2",{id:"methods"},"Methods"),(0,a.kt)("h3",{id:"checkactivelogin"},"checkActiveLogin"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"checkActiveLogin"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("p",null,"Checks all active logins in the database for consistency."),(0,a.kt)("p",null,"Currently no inconsistent state is possible."),(0,a.kt)("p",null,"A warning is produced, if any active logins without login data are found.\nThis is allowed, but should not happen in normal operation"),(0,a.kt)("h4",{id:"parameters-1"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-11"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L37"},"login-service/src/initialization/check-database-consistency.service.ts:37")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"checkdatabaseconsistency"},"checkDatabaseConsistency"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("strong",{parentName:"p"},"checkDatabaseConsistency"),"(): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"boolean"),">"),(0,a.kt)("h4",{id:"returns-1"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"boolean"),">"),(0,a.kt)("h4",{id:"defined-in-12"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L193"},"login-service/src/initialization/check-database-consistency.service.ts:193")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"checkloginuser"},"checkLoginUser"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"checkLoginUser"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("p",null,"Checks all login users in the database and the backend for consistency."),(0,a.kt)("p",null,"A login user in the database is inconsistent if"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It has no neo4j id (NOT FIXABLE)"),(0,a.kt)("li",{parentName:"ul"},"It doesn't exist in the backend (NOT FIXABLE)")),(0,a.kt)("h4",{id:"parameters-2"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-2"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-13"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L56"},"login-service/src/initialization/check-database-consistency.service.ts:56")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"checkstrategyinstance"},"checkStrategyInstance"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"checkStrategyInstance"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("p",null,"Checks if all strategy instances are consistent"),(0,a.kt)("p",null,"A strategy instance is considered inconsistent when:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It has a type of a strategy that is unknown (NOT FIXABLE)")),(0,a.kt)("h4",{id:"parameters-3"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-3"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-14"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L106"},"login-service/src/initialization/check-database-consistency.service.ts:106")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"checkuserlogindata"},"checkUserLoginData"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"checkUserLoginData"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("p",null,"Checks if all UserLoginData elements in the database are consistent"),(0,a.kt)("p",null,"A UserLoginData is considered inconsistent when:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It is set to state VALID but has no user assigned (NOT FIXABLE)"),(0,a.kt)("li",{parentName:"ul"},"It is set to state WAITING_FOR_REGISTER but has a user assigned (NOT FIXABLE)")),(0,a.kt)("h4",{id:"parameters-4"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-4"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-15"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L124"},"login-service/src/initialization/check-database-consistency.service.ts:124")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"checkuserlogindataimsuser"},"checkUserLoginDataImsUser"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"checkUserLoginDataImsUser"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("p",null,"Checks if all UserLoginDataImsUser elements in the database are consistent"),(0,a.kt)("p",null,"A UserLoginDataImsUser is considered inconsistent when:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The IMSUser referenced by its neo4j ID doesn't exist in the backend (NOT FIXABLE)")),(0,a.kt)("h4",{id:"parameters-5"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-5"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-16"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L148"},"login-service/src/initialization/check-database-consistency.service.ts:148")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"ensuredatabaseconsistency"},"ensureDatabaseConsistency"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("strong",{parentName:"p"},"ensureDatabaseConsistency"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBrokenConsistency?"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"void"),">"),(0,a.kt)("h4",{id:"parameters-6"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBrokenConsistency")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-6"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"void"),">"),(0,a.kt)("h4",{id:"defined-in-17"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L197"},"login-service/src/initialization/check-database-consistency.service.ts:197")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"rundatabasecheck"},"runDatabaseCheck"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("strong",{parentName:"p"},"runDatabaseCheck"),"(): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"void"),">"),(0,a.kt)("h4",{id:"returns-7"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"void"),">"),(0,a.kt)("h4",{id:"defined-in-18"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L206"},"login-service/src/initialization/check-database-consistency.service.ts:206")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"testdatabaseforconsistency"},"testDatabaseForConsistency"),(0,a.kt)("p",null,"\u25b8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Private")," ",(0,a.kt)("strong",{parentName:"p"},"testDatabaseForConsistency"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"fixBroken"),"): ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"parameters-7"},"Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"fixBroken")),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,a.kt)("h4",{id:"returns-8"},"Returns"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Promise"),"<",(0,a.kt)("inlineCode",{parentName:"p"},"string"),">"),(0,a.kt)("h4",{id:"defined-in-19"},"Defined in"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ccims/gropius-backend/blob/573f496/login-service/src/initialization/check-database-consistency.service.ts#L164"},"login-service/src/initialization/check-database-consistency.service.ts:164")))}p.isMDXComponent=!0}}]);